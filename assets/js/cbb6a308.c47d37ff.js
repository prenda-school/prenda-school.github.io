"use strict";(self.webpackChunkprenda_engineering=self.webpackChunkprenda_engineering||[]).push([[6633],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(a),m=o,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||r;return a?n.createElement(h,i(i({ref:t},p),{},{components:a})):n.createElement(h,i({ref:t},p))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,i[1]=s;for(var c=2;c<r;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5018:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var n=a(7462),o=(a(7294),a(3905));const r={sidebar_position:3},i="Product Analytics",s={unversionedId:"Practices/product-analytics",id:"Practices/product-analytics",title:"Product Analytics",description:"We rely on a set of tools that allow product managers and teams to accurately analyze user engagement and behavior in and across our applications. We abide by a series of norms for consistent user identification, grouping, and event tracking.",source:"@site/docs/Practices/product-analytics.md",sourceDirName:"Practices",slug:"/Practices/product-analytics",permalink:"/docs/Practices/product-analytics",draft:!1,editUrl:"https://github.com/prenda-school/prenda-school.github.io/tree/main/docs/Practices/product-analytics.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"NPM best practices",permalink:"/docs/Practices/npm"},next:{title:"Working with Bounded Contexts in Hub",permalink:"/docs/Practices/hub/"}},l={},c=[{value:"Data flow",id:"data-flow",level:2},{value:"Sources of data",id:"sources-of-data",level:3},{value:"Data analysis tools",id:"data-analysis-tools",level:3},{value:"Capturing user data",id:"capturing-user-data",level:3}],p={toc:c};function d(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"product-analytics"},"Product Analytics"),(0,o.kt)("p",null,"We rely on a set of tools that allow product managers and teams to accurately analyze user engagement and behavior in and across our applications. We abide by a series of norms for consistent user identification, grouping, and event tracking."),(0,o.kt)("admonition",{title:"tl;dr",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"In the Segment web app,"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"Create sources for application by each environment (development, staging, and production)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},'Follow naming convention: "Application (env)"'))),(0,o.kt)("li",{parentName:"ul"},"Connect sources to destinations",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Setup destinations if not done already (again by environment)")))),(0,o.kt)("p",{parentName:"admonition"},"In your project,"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"Install Segment snippet and load API Write Key by environment",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Remove all other analytics libraries"))),(0,o.kt)("li",{parentName:"ul"},"Track events imperatively, as a result of user actions",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},'Follow naming convention: "Location - Sub-Location - Object Action"'))))),(0,o.kt)("admonition",{title:"quick links",type:"info"},(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://app.segment.com/login"},"Segment app login")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://heapanalytics.com/login"},"Heap app login")))),(0,o.kt)("h2",{id:"data-flow"},"Data flow"),(0,o.kt)("p",null,"We rely on ",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/"},"Segment")," (",(0,o.kt)("a",{parentName:"p",href:"https://app.segment.com/"},"web application"),", credentials are in shared password manager), a customer data platform by Twilio that allows for a single, consistent intake, connection, and output of data for analytics. Instead of installing several tools in each application that each have their own API, requirements, and broader integrations, we advantage Segment's ",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/docs/connections/"},'"Connections"'),' paradigm. In Segment, data flows in from "Sources" and out to "Destinations". Segment takes care of all the necessary aggregation, transformation, and communication required in the connections between our applications and tools.'),(0,o.kt)("h3",{id:"sources-of-data"},"Sources of data"),(0,o.kt)("p",null,"We setup an application or other unique source of data as a ",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/docs/connections/sources/"},'"Source"')," (",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/docs/connections/sources/#create-a-source"},"directions"),") in Segment for each environment that the code runs in. Our source names follow a standard format: ",(0,o.kt)("strong",{parentName:"p"},"Application Name (env)"),'. For example, "Prenda World (prod)", "Prenda World (dev)", "Marketplace (prod)", etc.'),(0,o.kt)("h3",{id:"data-analysis-tools"},"Data analysis tools"),(0,o.kt)("p",null,"We setup a tool used to analyze data (like Heap or Google Analytics) as a ",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/docs/connections/destinations/"},'"Destination"')," (",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/docs/connections/destinations/#add-a-destination"},"directions"),") in Segment ideally for each environment that the code runs in. Our destination names follow a standard format: ",(0,o.kt)("strong",{parentName:"p"},"Tool Name (env)"),'. For example, "Heap (prod)", "Heap (dev)", etc.'),(0,o.kt)("h3",{id:"capturing-user-data"},"Capturing user data"),(0,o.kt)("p",null,"We capture user data in the spirit of ",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/docs/connections/spec/"},"The Segment Spec")," -- the linked documentation is extremely useful for anyone engaging in product analytics. We identify users with a stable, unique identifier that available across all sources: their Prenda Hub ID. We respect and advantage ",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/docs/connections/spec/identify/#traits"},"the reserved user traits")," that Segment defines. We track the actions that users take with a unique name and custom set of properties."),(0,o.kt)("p",null,"Our custom event properties do not include user identity information or other general metadata. Segment takes care of associating events with users and their identity information, and tracking metadata like location and time (",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/docs/connections/spec/track/#example"},"example event in json format"),")."),(0,o.kt)("p",null,"Our event names follow a standard format: ",(0,o.kt)("strong",{parentName:"p"},"Location - Sub-location (optional) - Object Action"),"."),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"location")," is your application (or other unique source). The ",(0,o.kt)("strong",{parentName:"p"},"object")," (a noun) is the piece of the app that the user is interacting with. The ",(0,o.kt)("strong",{parentName:"p"},"action")," (a past tense verb) is how user interacts with that object -- it is a . A ",(0,o.kt)("strong",{parentName:"p"},"sub-location")," can be used to help distinguish events that would otherwise have the same name or that benefit from being grouped by sub-page, area, or feature -- it is optional. For each part, use Proper Case. For example,"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Prenda World - Goal Updated"),(0,o.kt)("li",{parentName:"ul"},"Prenda World - Microschool Profile Updated"),(0,o.kt)("li",{parentName:"ul"},"Prenda World - Payment Information - Read More Link Clicked"),(0,o.kt)("li",{parentName:"ul"},"Marketplace - Start Enrollment Clicked"),(0,o.kt)("li",{parentName:"ul"},"Marketplace - Guide Biography Expanded"),(0,o.kt)("li",{parentName:"ul"},"Marketplace - Grades Filtered"),(0,o.kt)("li",{parentName:"ul"},"Marketplace - Main Search - Map Dragged"),(0,o.kt)("li",{parentName:"ul"},"Marketplace - Microschool Details - Map Dragged")),(0,o.kt)("p",null,'Sometimes, the object isn\'t exactly a "piece of the app" but is a reasonable transformation. For example, in "Prenda World - User Logged In" could have been "Prenda World - Account Logged In" because "account" is closer to a piece of the app, however "user" is a friendlier object name for future analysis.'),(0,o.kt)("p",null,"It is ",(0,o.kt)("em",{parentName:"p"},"not")," acceptable to break the standard format unless ",(0,o.kt)("em",{parentName:"p"},"absolutely")," necessary."),(0,o.kt)("p",null,"Our event name standard is a combination of ",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/academy/collecting-data/naming-conventions-for-clean-data/"},'Segment\'s "naming conventions for clean data"')," and ",(0,o.kt)("a",{parentName:"p",href:"https://help.heap.io/data-management/data-management-features/naming-conventions-overview/"},'Heap\'s location prefixing under "naming conventions"'),". Both linked articles are great resources to review for clarity on why a standard is useful, what ours is composed from, and how it can be applied."),(0,o.kt)("admonition",{title:"Troubleshooting Heap",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"The Segment to Heap integration has peculiarities you should be aware of,"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"Only the ",(0,o.kt)("inlineCode",{parentName:"li"},"identify")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"track")," calls can flow into Heap."),(0,o.kt)("li",{parentName:"ul"},'Events from Segment only show up as "Custom Events"'),(0,o.kt)("li",{parentName:"ul"},"Events may take 24 hours for Heap to fully register them (events commonly do not show up or appear and disappear initially)."),(0,o.kt)("li",{parentName:"ul"},"Nested objects or arrays in event properties or user traits are flattened or stringified, respectively.")),(0,o.kt)("p",{parentName:"admonition"},"These are highlights of developer experience and ",(0,o.kt)("a",{parentName:"p",href:"https://segment.com/docs/connections/destinations/catalog/heap"},"Segment documentation on the Heap destination"))))}d.isMDXComponent=!0}}]);